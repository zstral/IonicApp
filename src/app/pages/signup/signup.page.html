<ion-content [fullscreen]="true">

  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-title>Registro</ion-title>
    </ion-toolbar>
  </ion-header>

  <form #signupForm="ngForm" (ngSubmit)=onSubmit(signupForm)>
    <ion-list>

      <ion-item>
        <ion-input data-testid="username" type="text"
                  [(ngModel)]="user.username"
                  name="username"
                  required
                  minlength="3"
                  maxlength="8"
                  #usernameInput="ngModel"
                  label="Nombre de usuario"
                  labelPlacement="floating"
        >
        </ion-input>
      </ion-item>
      <div *ngIf="usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)">
        <ion-text color="danger">
          <span *ngIf="usernameInput.errors?.['required']">El nombre de usuario es obligatorio.</span>
          <span *ngIf="usernameInput.errors?.['minlength']">Debe tener al menos {{usernameInput.errors?.['minlength'].requiredLength}} carácteres.</span>
          <span *ngIf="usernameInput.errors?.['maxlength']">No puede exceder los {{usernameInput.errors?.['maxlength'].requiredLength}} carácteres.</span>
        </ion-text>
      </div>

      <ion-item>
        <ion-input data-testid="password" type="password"
                  [(ngModel)]="user.password"
                  name="password"
                  required
                  minlength="4"
                  maxlength="4"
                  #passwordInput="ngModel"
                  label="Contraseña"
                  labelPlacement="floating">
        </ion-input>
      </ion-item>
      <div *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)">
        <ion-text color="danger">
          <span *ngIf="passwordInput.errors?.['required']">La contraseña es obligatoria.</span>
          <span *ngIf="passwordInput.errors?.['minlength']">Debe tener al menos {{passwordInput.errors?.['minlength'].requiredLength}} caracteres.</span>
          <span *ngIf="passwordInput.errors?.['maxlength']">No puede exceder los {{passwordInput.errors?.['maxlength'].requiredLength}} caracteres.</span>
        </ion-text>
      </div>
      
    </ion-list>

    <ion-button expand="block"
                shape="round"
                type="submit"
                [disabled]="!signupForm.valid"
    >
      Registrarse
    </ion-button>

  </form>

  <ion-col>
    <div class="ion-text-center">
      <a routerLink="/login" text>¿Ya tienes una cuenta? Inicia sesión</a>
    </div>
  </ion-col>
  
</ion-content>
